{% extends "layout/basic.html" %}
{% block title %} Додавання оголошення{% endblock %}

{% block content %}
    {#    <h2>Додавання оголошення</h2>#}



    <form method="post">
        {% csrf_token %}

        <div class=" mb-0 ml-3">{{ form.title.label_tag }} </div>
        <div class="card text-white bg-info mb-3 ml-3">{{ form.title }}</div>
        <div class=" mb-0 ml-3">{{ form.content.label_tag }} </div>
        <div class="card text-white bg-info mb-3 ml-3">{{ form.content }}</div>
        <div class=" mb-0 ml-3">{{ form.price.label_tag }} </div>
        <div class="card text-white bg-info mb-3 ml-3">{{ form.price }}</div>
        <div class=" mb-0 ml-3">{{ form.rubric.label_tag }} </div>
        <div class="card text-white bg-info mb-3 ml-3">{{ form.rubric }}</div>
        <div class=" mb-0 ml-3">{{ form.slug.label_tag }} </div>
        <div class="card text-white bg-info mb-3 ml-3">{{ form.slug }}</div>
        <div class="card bg-info mb-3 ml-3">{{ form.photo }}</div>

        <div class="card text-white bg-info mb-3 ml-3"><input type="submit" value="Додати"></div>
    </form>
    {#Скрипт для генерирования slug#}


    <script>
        function translit(s) {

            var ru = {
                'а': 'a', 'б': 'b', 'в': 'v', 'г': 'g', 'д': 'd',
                'е': 'e', 'ё': 'e', 'ж': 'j', 'з': 'z', 'и': 'i',
                'к': 'k', 'л': 'l', 'м': 'm', 'н': 'n', 'о': 'o',
                'п': 'p', 'р': 'r', 'с': 's', 'т': 't', 'у': 'u',
                'ф': 'f', 'х': 'h', 'ц': 'c', 'ч': 'ch', 'ш': 'sh',
                'щ': 'shch', 'ы': 'y', 'э': 'e', 'ю': 'u', 'я': 'ya',
                'є': 'ye', 'ї: 'yi'
            }, n_str = [];

            s = s.replace(/[ъь]+/g, '').replace(/й/g, 'i');

            for (var i = 0; i < s.length; ++i) {
                n_str.push(
                    ru[s[i]]
                    || ru[s[i].toLowerCase()] == undefined && s[i]
                    || ru[s[i].toLowerCase()].replace(/^(.)/, function (match) {
                        return match.toUpperCase()
                    })
                );
            }
            return n_str.join('');
        }
    </script>

    <script>
        function tr(s) {
            res = ''
            s = s.toLowerCase()
            for (var i = 0; i < s.length; ++i) {
                switch (s[i]) {
                    case 'а':
                        res = res + 'a';
                        break;
                    case 'б':
                        res = res + 'b';
                        break;
                    case 'в':
                        res = res + 'v';
                        break;
                    case 'г':
                        res = res + 'g';
                        break;
                    case 'д':
                        res = res + 'd';
                        break;
                    case 'е':
                        res = res + 'e';
                        break;
                    case 'ё':
                        res = res + 'e';
                        break;
                    case 'ж':
                        res = res + 'j';
                        break;
                    case 'з':
                        res = res + 'z';
                        break;
                    case 'и':
                    case 'ы':
                    case 'і':
                        res = res + 'i';
                        break;
                    case 'к':
                        res = res + 'k';
                        break;
                    case 'л':
                        res = res + 'l';
                        break;
                    case 'м':
                        res = res + 'm';
                        break;
                    case 'н':
                        res = res + 'n';
                        break;
                    case 'о':
                        res = res + 'o';
                        break;
                    case 'п':
                        res = res + 'p';
                        break;
                    case 'р':
                        res = res + 'r';
                        break;
                    case 'с':
                        res = res + 's';
                        break;
                    case  'т':
                        res = res + 't';
                        break;
                    case  'у':
                        res = res + 'u';
                        break;
                    case 'ф':
                        res = res + 'f';
                        break;
                    case  'х':
                        res = res + 'h';
                        break;
                    case  'ц':
                        res = res + 'c';
                        break;
                    case  'ч':
                        res = res + 'ch';
                        break;
                    case  'ш':
                        res = res + 'sh';
                        break;
                    case 'щ':
                        res = res + 'shch';
                        break;
                    case  'й':
                        res = res + 'y';
                        break;
                    case  'э':
                        res = res + 'e';
                        break;
                    case  'ю':
                        res = res + 'u';
                        break;
                    case  'я':
                        res = res + 'ya';
                        break;
                    case 'є':
                        res = res + 'ye';
                        break;
                    case  'ї':
                        res = res + 'yi';
                        break;
                    case  'ь':
                        res = res + '';
                        break;
                   case  ' ':
                        res = res + '_';
                        break;
                    default:
                        if (((s[i] >= 'a') &&
                        (s[i] <= 'z'))||((s[i] >= '0') &&(s[i] <= '9')))
                        res = res + s[i];

                }

            }
            return res;
        }
    </script>

    <script>

        id_title.onchange = function (e) {
            s = this.value;
            id_slug.value = tr(s);
        };
    </script>

{% endblock %}