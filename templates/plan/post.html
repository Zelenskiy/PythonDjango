{% if count != 0 %}


    <form id="update-form" method="post" action="{% url 'postr' 20 1 %}">

        {% csrf_token %}
        {#        ss#}

        <div class=" mb-0 ml-3">{{ form.direction_id.label_tag }} </div>
        <div class="card text-white bg-info mb-1 ml-3 ">{{ form.direction_id }}</div>
        {#        <div class="card text-white bg-info mb-1 ml-3 " >{{ form.id }}</div>#}

        <div class=" mb-0 ml-3">{{ form.purpose_id.label_tag }} </div>
        <div class="card text-white bg-info mb-1 ml-3 ">{{ form.purpose_id }}</div>

        <div class=" mb-0 ml-3">{{ form.content.label_tag }} </div>
        <div id="a1" class="card text-white bg-info mb-1 ml-3 small">{{ form.content }}</div>

        <div class=" mb-0 ml-3">{{ form.generalization.label_tag }} </div>
        <div class="card text-white bg-info mb-1 ml-3 ">{{ form.generalization }}</div>

        <div class=" mb-0 ml-3">{{ form.responsible.label_tag }} </div>
        <div class="card text-white bg-info mb-1 ml-3  small">{{ form.responsible }}</div>

        <div class=" mb-0 ml-3">{{ form.termin.label_tag }} </div>
        <div class="card text-white bg-info mb-1 ml-3 ">{{ form.termin }}</div>


        <div class=" mb-0 ml-3">{{ form.note.label_tag }} </div>
        <div class="card text-white bg-info mb-1 ml-3 ">{{ form.note }}</div>


        <div class="ml-3 mt-3 mb-3">
            <div>
                <div class="btn-group btn-group">
                    <button type="button" id="first" class="btn btn-primary bg-info"
                            style="width: 50px; ">&lt;&lt;
                    </button>&nbsp;
                    <button type="button" id="prev" class="btn btn-primary bg-info"
                            style="width: 50px; ">&lt;
                    </button>&nbsp;
                    <button type="button" id="next" class="btn btn-primary bg-info"
                            style="width: 50px; ">&gt;
                    </button>&nbsp;
                    <button type="button" id="last" class="btn btn-primary bg-info"
                            style="width: 50px; ">&gt;&gt;
                    </button>

                    <button type="button" id="add_btn" style="width: 50px; " class="ml-5 bg-info text-white"> +</button>
                    <button type="button" id="del_button" style="width: 50px; " class="ml-5 bg-info text-white"> -
                    </button>

                </div>
                {#                <input id="goEdit" type="checkbox" aria-label="Дозволити редагування" >#}
                {#                <label class="form-check-label" for="goEdit">Дозволити редагування</label>#}


            </div>
            <span id="chb_panel">

            &nbsp;&nbsp; id=<span id="plan_id"
                                  value="{{ i_id }}">{{ i_id }}</span>&nbsp;&nbsp;&nbsp;{{ num }}&nbsp;(<span
                    id="count_id">{{ count }}</span>)
                &nbsp;&nbsp;</span>

        </div>

    </form>

    <p>&nbsp;</p>
    <script type="text/javascript">
        var count = {{ count }};
        var n;

    </script>
    {#  Блок скриптів для роботи з кнопками навігації#}

    <script type="text/javascript">


        function update_model() {
            $('#goEdit').attr('checked', old_value_goEdit);
            if ($('#goEdit').is(':checked')) {
                old_value_goEdit = true;
                id_pl = {{ i_id }};
                var data = $("#update-form").serialize();
                $.ajax({
                        url: "../update_plan/" + id_pl + "/", // the endpoint
                        {#url: "http://127.0.0.1:8000/plan/update_plan/", // the endpoint#}
                        type: "POST", // http method
                        data: data,
                    }
                );
            }

        }

        jQuery('#add_btn').on('click', function () {
            r_id = {{ r_id }};
            {#console.log(r_id);#}
            var data = $("#update-form").serialize();
            $.ajax({
                    url: "../add_plan/" + r_id + "/",
                    type: "POST",
                    data: data,
                }
            );
            //Відкриваємо щойностворений запис

             //Щоб зберегло
            $('#goEdit').attr('checked', true);

        });

        jQuery('#next').on('click', function () {
            n = n + 1;
            if (n <= 0) n = 1;
            if (n >= count) n = count;
            s = "" + a + "/" + n;
            update_model();
            $('#pl').load(s);
        });


        jQuery('#last').on('click', function () {
                n = count;
                s = "" + a + "/" + n;
                update_model();
                $('#pl').load(s);
            }
        );

        jQuery('#prev').on('click', function () {
            n = n - 1;
            if (n <= 0) n = 1;
            if (n >= count) n = count;
            s = "" + a + "/" + n;
            update_model();
            $('#pl').load(s);
        });
        jQuery('#first').on('click', function () {
            n = 1;
            s = "" + a + "/" + n;
            update_model();
            $('#pl').load(s);
        });
    </script>
    </div>

{% endif %}





